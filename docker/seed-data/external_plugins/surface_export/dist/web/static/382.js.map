{"version":3,"file":"static/382.js","mappings":"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","sources":["webpack://@solarcloud7/plugin-surface-export/./web/style.css","webpack://@solarcloud7/plugin-surface-export/./node_modules/css-loader/dist/runtime/api.js","webpack://@solarcloud7/plugin-surface-export/./node_modules/css-loader/dist/runtime/noSourceMaps.js","webpack://@solarcloud7/plugin-surface-export/./node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack://@solarcloud7/plugin-surface-export/./node_modules/react/jsx-runtime.js","webpack://@solarcloud7/plugin-surface-export/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://@solarcloud7/plugin-surface-export/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://@solarcloud7/plugin-surface-export/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://@solarcloud7/plugin-surface-export/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://@solarcloud7/plugin-surface-export/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://@solarcloud7/plugin-surface-export/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://@solarcloud7/plugin-surface-export/./web/style.css?93f3","webpack://@solarcloud7/plugin-surface-export/./web/index.jsx"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.surface-export-tab-body {\r\n\tdisplay: grid;\r\n\tgrid-template-columns: 1fr;\r\n\tgap: 16px;\r\n}\r\n\r\n@media (min-width: 1200px) {\r\n\t.surface-export-tab-body {\r\n\t\tgrid-template-columns: 1.2fr 0.8fr;\r\n\t\talign-items: start;\r\n\t}\r\n}\r\n\r\n.surface-export-tree-panel,\r\n.surface-export-action-panel {\r\n\tmin-width: 0;\r\n}\r\n\r\n.surface-export-log-body {\r\n\tdisplay: grid;\r\n\tgrid-template-columns: 1fr;\r\n\tgap: 16px;\r\n}\r\n\r\n.surface-export-log-row {\r\n\tcursor: pointer;\r\n}\r\n\r\n.surface-export-log-row-selected > td {\r\n\tbackground: rgba(24, 144, 255, 0.12) !important;\r\n}\r\n`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (i) {\n  return i[1];\n};","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./style.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./style.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { useContext, useEffect, useMemo, useState } from \"react\";\r\nimport {\r\n\tAlert,\r\n\tButton,\r\n\tCard,\r\n\tEmpty,\r\n\tSelect,\r\n\tSpace,\r\n\tSpin,\r\n\tTable,\r\n\tTag,\r\n\tTabs,\r\n\tTimeline,\r\n\tTypography,\r\n\tmessage as antMessage,\r\n} from \"antd\";\r\n\r\nimport {\r\n\tBaseWebPlugin,\r\n\tControlContext,\r\n\tPageHeader,\r\n\tPageLayout,\r\n\tnotifyErrorHandler,\r\n} from \"@clusterio/web_ui\";\r\nimport * as messageDefs from \"../messages\";\r\n\r\nimport \"./style.css\";\r\n\r\nconst {\r\n\tPERMISSIONS,\r\n\tGetPlatformTreeRequest,\r\n\tListTransactionLogsRequest,\r\n\tGetTransactionLogRequest,\r\n\tStartPlatformTransferRequest,\r\n\tSetSurfaceExportSubscriptionRequest,\r\n\tSurfaceExportTreeUpdateEvent,\r\n\tSurfaceExportTransferUpdateEvent,\r\n\tSurfaceExportLogUpdateEvent,\r\n} = messageDefs;\r\n\r\nconst { Text } = Typography;\r\n\r\nfunction statusColor(status) {\r\n\tswitch (status) {\r\n\tcase \"transporting\":\r\n\t\treturn \"processing\";\r\n\tcase \"awaiting_validation\":\r\n\t\treturn \"gold\";\r\n\tcase \"completed\":\r\n\t\treturn \"success\";\r\n\tcase \"failed\":\r\n\tcase \"error\":\r\n\tcase \"cleanup_failed\":\r\n\t\treturn \"error\";\r\n\tdefault:\r\n\t\treturn \"default\";\r\n\t}\r\n}\r\n\r\nfunction summaryFromTransferInfo(transferInfo, lastEventAt = null) {\r\n\tif (!transferInfo) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn {\r\n\t\ttransferId: transferInfo.transferId || transferInfo.id || null,\r\n\t\tplatformName: transferInfo.platformName || \"Unknown\",\r\n\t\tsourceInstanceId: transferInfo.sourceInstanceId ?? -1,\r\n\t\tsourceInstanceName: transferInfo.sourceInstanceName ?? null,\r\n\t\ttargetInstanceId: transferInfo.targetInstanceId ?? -1,\r\n\t\ttargetInstanceName: transferInfo.targetInstanceName ?? null,\r\n\t\tstatus: transferInfo.status || \"unknown\",\r\n\t\tstartedAt: transferInfo.startedAt || Date.now(),\r\n\t\tcompletedAt: transferInfo.completedAt || null,\r\n\t\tfailedAt: transferInfo.failedAt || null,\r\n\t\terror: transferInfo.error || null,\r\n\t\tlastEventAt,\r\n\t};\r\n}\r\n\r\nfunction mergeTransferSummary(existing, incoming) {\r\n\tconst byId = new Map((existing || []).map(summary => [summary.transferId, summary]));\r\n\tif (incoming && incoming.transferId) {\r\n\t\tbyId.set(incoming.transferId, { ...byId.get(incoming.transferId), ...incoming });\r\n\t}\r\n\r\n\treturn Array.from(byId.values()).sort((a, b) => (b.startedAt || 0) - (a.startedAt || 0));\r\n}\r\n\r\nfunction useSurfaceExportPlugin(control) {\r\n\treturn control.plugins.get(\"surface_export\");\r\n}\r\n\r\nfunction useSurfaceExportState(plugin) {\r\n\tconst [state, setState] = useState(plugin.getState());\r\n\r\n\tuseEffect(() => {\r\n\t\tfunction onUpdate() {\r\n\t\t\tsetState(plugin.getState());\r\n\t\t}\r\n\r\n\t\tplugin.onUpdate(onUpdate);\r\n\t\treturn () => plugin.offUpdate(onUpdate);\r\n\t}, [plugin]);\r\n\r\n\treturn state;\r\n}\r\n\r\nfunction ManualTransferTab({ plugin, state }) {\r\n\tconst [selectedPlatformKey, setSelectedPlatformKey] = useState(null);\r\n\tconst [selectedTargetInstance, setSelectedTargetInstance] = useState(null);\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n\tconst { tree, loadingTree, treeError } = state;\r\n\tconst platformLookup = useMemo(() => {\r\n\t\tconst lookup = new Map();\r\n\t\tif (!tree) {\r\n\t\t\treturn lookup;\r\n\t\t}\r\n\r\n\t\tconst addInstancePlatforms = instance => {\r\n\t\t\tfor (const platform of instance.platforms || []) {\r\n\t\t\t\tconst key = `platform:${instance.instanceId}:${platform.platformIndex}`;\r\n\t\t\t\tlookup.set(key, {\r\n\t\t\t\t\tinstanceId: instance.instanceId,\r\n\t\t\t\t\tinstanceName: instance.instanceName,\r\n\t\t\t\t\tforceName: platform.forceName || tree.forceName || \"player\",\r\n\t\t\t\t\t...platform,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfor (const host of tree.hosts || []) {\r\n\t\t\tfor (const instance of host.instances || []) {\r\n\t\t\t\taddInstancePlatforms(instance);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (const instance of tree.unassignedInstances || []) {\r\n\t\t\taddInstancePlatforms(instance);\r\n\t\t}\r\n\t\treturn lookup;\r\n\t}, [tree]);\r\n\r\n\tconst instanceListData = useMemo(() => {\r\n\t\tif (!tree) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tconst rows = [];\r\n\r\n\t\tfor (const host of tree.hosts || []) {\r\n\t\t\tconst sortedInstances = [...(host.instances || [])].sort((a, b) =>\r\n\t\t\t\ta.instanceName.localeCompare(b.instanceName)\r\n\t\t\t);\r\n\r\n\t\t\tfor (const instance of sortedInstances) {\r\n\t\t\t\tfor (const platform of instance.platforms || []) {\r\n\t\t\t\t\trows.push({\r\n\t\t\t\t\t\tkey: `platform:${instance.instanceId}:${platform.platformIndex}`,\r\n\t\t\t\t\t\thostName: host.hostName,\r\n\t\t\t\t\t\thostConnected: host.connected,\r\n\t\t\t\t\t\tinstanceId: instance.instanceId,\r\n\t\t\t\t\t\tinstanceName: instance.instanceName,\r\n\t\t\t\t\t\tinstanceConnected: instance.connected,\r\n\t\t\t\t\t\tinstancePlatformError: instance.platformError,\r\n\t\t\t\t\t\tplatform,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (tree.unassignedInstances?.length) {\r\n\t\t\tconst sortedUnassigned = [...tree.unassignedInstances].sort((a, b) =>\r\n\t\t\t\ta.instanceName.localeCompare(b.instanceName)\r\n\t\t\t);\r\n\r\n\t\t\tfor (const instance of sortedUnassigned) {\r\n\t\t\t\tfor (const platform of instance.platforms || []) {\r\n\t\t\t\t\trows.push({\r\n\t\t\t\t\t\tkey: `platform:${instance.instanceId}:${platform.platformIndex}`,\r\n\t\t\t\t\t\thostName: \"Unassigned\",\r\n\t\t\t\t\t\thostConnected: null,\r\n\t\t\t\t\t\tinstanceId: instance.instanceId,\r\n\t\t\t\t\t\tinstanceName: instance.instanceName,\r\n\t\t\t\t\t\tinstanceConnected: instance.connected,\r\n\t\t\t\t\t\tinstancePlatformError: instance.platformError,\r\n\t\t\t\t\t\tplatform,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rows;\r\n\t}, [tree]);\r\n\r\n\tconst selectedSource = selectedPlatformKey ? platformLookup.get(selectedPlatformKey) : null;\r\n\r\n\tconst destinationOptions = useMemo(() => {\r\n\t\tif (!tree) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tconst instanceNodes = [];\r\n\t\tfor (const host of tree.hosts || []) {\r\n\t\t\tfor (const instance of host.instances || []) {\r\n\t\t\t\tinstanceNodes.push(instance);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (const instance of tree.unassignedInstances || []) {\r\n\t\t\tinstanceNodes.push(instance);\r\n\t\t}\r\n\r\n\t\treturn instanceNodes\r\n\t\t\t.filter(instance => instance.instanceId !== selectedSource?.instanceId)\r\n\t\t\t.map(instance => ({\r\n\t\t\t\tlabel: `${instance.instanceName} (${instance.instanceId})`,\r\n\t\t\t\tvalue: instance.instanceId,\r\n\t\t\t}));\r\n\t}, [tree, selectedSource]);\r\n\r\n\tasync function submitTransfer() {\r\n\t\tif (!selectedSource || selectedTargetInstance === null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsSubmitting(true);\r\n\t\ttry {\r\n\t\t\tconst response = await plugin.startTransfer({\r\n\t\t\t\tsourceInstanceId: selectedSource.instanceId,\r\n\t\t\t\tsourcePlatformIndex: selectedSource.platformIndex,\r\n\t\t\t\ttargetInstanceId: Number(selectedTargetInstance),\r\n\t\t\t\tforceName: selectedSource.forceName || \"player\",\r\n\t\t\t});\r\n\t\t\tif (!response.success) {\r\n\t\t\t\tconst errorDetails = [\r\n\t\t\t\t\t`Error: ${response.error || \"Unknown error\"}`,\r\n\t\t\t\t\t`Source: Instance ${selectedSource.instanceId} (${selectedSource.instanceName})`,\r\n\t\t\t\t\t`Platform: ${selectedSource.platformName} (index ${selectedSource.platformIndex})`,\r\n\t\t\t\t\t`Target: Instance ${selectedTargetInstance}`,\r\n\t\t\t\t].join(\" | \");\r\n\t\t\t\tconsole.error(\"[Surface Export] Transfer failed:\", errorDetails);\r\n\t\t\t\tthrow new Error(response.error || \"Transfer start failed\");\r\n\t\t\t}\r\n\t\t\tconsole.info(`[Surface Export] Transfer started: ${response.transferId}`);\r\n\t\t\tantMessage.success(\r\n\t\t\t\t`Transfer started: ${response.transferId}`,\r\n\t\t\t\t5  // Show for 5 seconds\r\n\t\t\t);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"[Surface Export] Transfer submission error:\", err);\r\n\t\t\tantMessage.error(\r\n\t\t\t\terr.message || \"Failed to start transfer\",\r\n\t\t\t\t10  // Show error for 10 seconds\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tsetIsSubmitting(false);\r\n\t\t}\r\n\t}\r\n\r\n\tconst instanceColumns = [\r\n\t\t{\r\n\t\t\ttitle: \"Host\",\r\n\t\t\tdataIndex: \"hostName\",\r\n\t\t\tkey: \"hostName\",\r\n\t\t\twidth: \"15%\",\r\n\t\t\trender: (hostName, row) => (\r\n\t\t\t\t<Space>\r\n\t\t\t\t\t<Text>{hostName}</Text>\r\n\t\t\t\t\t{row.hostConnected !== null ? (\r\n\t\t\t\t\t\t<Tag color={row.hostConnected ? \"green\" : \"default\"}>\r\n\t\t\t\t\t\t\t{row.hostConnected ? \"online\" : \"offline\"}\r\n\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Instance\",\r\n\t\t\tdataIndex: \"instanceName\",\r\n\t\t\tkey: \"instanceName\",\r\n\t\t\twidth: \"25%\",\r\n\t\t\trender: (instanceName, row) => (\r\n\t\t\t\t<Space>\r\n\t\t\t\t\t<Text>{instanceName}</Text>\r\n\t\t\t\t\t<Tag color={row.instanceConnected ? \"green\" : \"default\"}>\r\n\t\t\t\t\t\t{row.instanceConnected ? \"connected\" : \"disconnected\"}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t\t{row.instancePlatformError ? <Tag color=\"warning\">error</Tag> : null}\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Platform\",\r\n\t\t\tkey: \"platform\",\r\n\t\t\twidth: \"40%\",\r\n\t\t\trender: (_, row) => (\r\n\t\t\t\t<Space>\r\n\t\t\t\t\t<Text>{row.platform.platformName}</Text>\r\n\t\t\t\t\t<Tag color={statusColor(row.platform.transferStatus)}>\r\n\t\t\t\t\t\t{row.platform.transferStatus || \"idle\"}\r\n\t\t\t\t\t</Tag>\r\n\t\t\t\t</Space>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<div className=\"surface-export-tab-body\">\r\n\t\t\t<div className=\"surface-export-tree-panel\">\r\n\t\t\t\t<Card title=\"Available Platforms\">\r\n\t\t\t\t\t{loadingTree ? <Spin /> : null}\r\n\t\t\t\t\t{treeError ? <Alert type=\"error\" showIcon message={treeError} /> : null}\r\n\t\t\t\t\t{!loadingTree && !instanceListData.length ? <Empty description=\"No platforms found\" /> : null}\r\n\t\t\t\t\t{instanceListData.length ? (\r\n\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tcolumns={instanceColumns}\r\n\t\t\t\t\t\t\tdataSource={instanceListData}\r\n\t\t\t\t\t\t\trowKey={row => row.key}\r\n\t\t\t\t\t\t\tpagination={{ pageSize: 15 }}\r\n\t\t\t\t\t\t\trowClassName={row => row.key === selectedPlatformKey ? \"surface-export-log-row-selected\" : \"surface-export-log-row\"}\r\n\t\t\t\t\t\t\tonRow={row => ({\r\n\t\t\t\t\t\t\t\tonClick: () => setSelectedPlatformKey(row.key),\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"surface-export-action-panel\">\r\n\t\t\t\t<Card title=\"Manual Transfer\">\r\n\t\t\t\t\t<Space direction=\"vertical\" size=\"middle\" style={{ width: \"100%\" }}>\r\n\t\t\t\t\t\t{selectedSource ? (\r\n\t\t\t\t\t\t\t<Alert\r\n\t\t\t\t\t\t\t\ttype=\"info\"\r\n\t\t\t\t\t\t\t\tshowIcon\r\n\t\t\t\t\t\t\t\tmessage={`Source: ${selectedSource.platformName}`}\r\n\t\t\t\t\t\t\t\tdescription={`Instance ${selectedSource.instanceName} (${selectedSource.instanceId})`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Alert type=\"warning\" showIcon message=\"Select a source platform in the tree\" />\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tplaceholder=\"Select destination instance\"\r\n\t\t\t\t\t\t\toptions={destinationOptions}\r\n\t\t\t\t\t\t\tvalue={selectedTargetInstance}\r\n\t\t\t\t\t\t\tonChange={setSelectedTargetInstance}\r\n\t\t\t\t\t\t\tdisabled={!selectedSource}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\tonClick={submitTransfer}\r\n\t\t\t\t\t\t\tdisabled={!selectedSource || selectedTargetInstance === null}\r\n\t\t\t\t\t\t\tloading={isSubmitting}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tStart Transfer\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Space>\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction humanizeMetricKey(key) {\r\n\treturn String(key || \"\")\r\n\t\t.replace(/_/g, \" \")\r\n\t\t.replace(/([a-z])([A-Z])/g, \"$1 $2\")\r\n\t\t.replace(/\\s+/g, \" \")\r\n\t\t.trim()\r\n\t\t.replace(/^./, text => text.toUpperCase());\r\n}\r\n\r\nfunction formatDuration(durationMs) {\r\n\tif (typeof durationMs !== \"number\" || Number.isNaN(durationMs)) {\r\n\t\treturn \"-\";\r\n\t}\r\n\tif (durationMs >= 1000) {\r\n\t\treturn `${(durationMs / 1000).toFixed(1)}s (${Math.round(durationMs).toLocaleString()}ms)`;\r\n\t}\r\n\treturn `${Math.round(durationMs).toLocaleString()}ms`;\r\n}\r\n\r\nfunction formatNumeric(value, maxFractionDigits = 1) {\r\n\tif (typeof value !== \"number\" || Number.isNaN(value)) {\r\n\t\treturn \"-\";\r\n\t}\r\n\treturn value.toLocaleString(undefined, { maximumFractionDigits: maxFractionDigits });\r\n}\r\n\r\nfunction formatSigned(value, maxFractionDigits = 1) {\r\n\tif (typeof value !== \"number\" || Number.isNaN(value)) {\r\n\t\treturn \"-\";\r\n\t}\r\n\tconst sign = value > 0 ? \"+\" : \"\";\r\n\treturn `${sign}${value.toLocaleString(undefined, { maximumFractionDigits: maxFractionDigits })}`;\r\n}\r\n\r\nfunction sumValues(map) {\r\n\treturn Object.values(map || {}).reduce((total, value) => {\r\n\t\tconst numeric = Number(value);\r\n\t\treturn Number.isFinite(numeric) ? total + numeric : total;\r\n\t}, 0);\r\n}\r\n\r\nfunction buildMetricRows(data) {\r\n\tif (!data || typeof data !== \"object\") {\r\n\t\treturn [];\r\n\t}\r\n\r\n\treturn Object.entries(data).map(([key, value]) => {\r\n\t\tlet formattedValue = \"-\";\r\n\t\tif (typeof value === \"boolean\") {\r\n\t\t\tformattedValue = value ? \"Yes\" : \"No\";\r\n\t\t} else if (typeof value === \"number\") {\r\n\t\t\tconst lowered = key.toLowerCase();\r\n\t\t\tif (lowered.endsWith(\"ms\")) {\r\n\t\t\t\tformattedValue = `${formatNumeric(value, 0)} ms`;\r\n\t\t\t} else if (lowered.endsWith(\"ticks\")) {\r\n\t\t\t\tformattedValue = `${formatNumeric(value, 0)} ticks`;\r\n\t\t\t} else if (lowered.endsWith(\"kb\")) {\r\n\t\t\t\tformattedValue = `${formatNumeric(value, 1)} KB`;\r\n\t\t\t} else {\r\n\t\t\t\tformattedValue = formatNumeric(value, Number.isInteger(value) ? 0 : 1);\r\n\t\t\t}\r\n\t\t} else if (value !== null && value !== undefined) {\r\n\t\t\tformattedValue = String(value);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tkey,\r\n\t\t\tmetric: humanizeMetricKey(key),\r\n\t\t\tvalue: formattedValue,\r\n\t\t};\r\n\t});\r\n}\r\n\r\nfunction buildExpectedActualRows(expectedMap, actualMap) {\r\n\tconst expected = expectedMap || {};\r\n\tconst actual = actualMap || {};\r\n\tconst keys = new Set([ ...Object.keys(expected), ...Object.keys(actual) ]);\r\n\tconst rows = [];\r\n\tfor (const name of keys) {\r\n\t\tconst expectedValue = Number(expected[name] || 0);\r\n\t\tconst actualValue = Number(actual[name] || 0);\r\n\t\tconst delta = actualValue - expectedValue;\r\n\t\trows.push({\r\n\t\t\tkey: name,\r\n\t\t\tname,\r\n\t\t\texpected: expectedValue,\r\n\t\t\tactual: actualValue,\r\n\t\t\tdelta,\r\n\t\t\tpreservedPct: expectedValue > 0 ? (actualValue / expectedValue) * 100 : null,\r\n\t\t});\r\n\t}\r\n\trows.sort((a, b) => Math.abs(b.delta) - Math.abs(a.delta) || a.name.localeCompare(b.name));\r\n\treturn rows;\r\n}\r\n\r\nfunction findLatestEvent(events, predicate) {\r\n\tfor (let index = events.length - 1; index >= 0; index -= 1) {\r\n\t\tif (predicate(events[index])) {\r\n\t\t\treturn events[index];\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction buildDetailedLogSummary(detail, transferId) {\r\n\tconst transferInfo = detail?.transferInfo || null;\r\n\tconst events = Array.isArray(detail?.events) ? detail.events : [];\r\n\tconst summary = detail?.summary && typeof detail.summary === \"object\" ? detail.summary : {};\r\n\r\n\tconst transferCreatedEvent = findLatestEvent(events, event => event?.eventType === \"transfer_created\");\r\n\tconst validationEvent = findLatestEvent(events, event => (\r\n\t\tevent?.eventType === \"validation_received\"\r\n\t\t|| event?.eventType === \"validation_failed\"\r\n\t\t|| event?.validation\r\n\t));\r\n\tconst completionEvent = findLatestEvent(events, event => (\r\n\t\tevent?.eventType === \"transfer_completed\"\r\n\t\t|| event?.eventType === \"transfer_failed\"\r\n\t));\r\n\tconst latestEvent = events.length ? events[events.length - 1] : null;\r\n\r\n\tconst status = transferInfo?.status || summary.status || \"unknown\";\r\n\tlet result = summary.result;\r\n\tif (!result) {\r\n\t\tif (status === \"completed\") {\r\n\t\t\tresult = \"SUCCESS\";\r\n\t\t} else if ([ \"failed\", \"error\", \"cleanup_failed\" ].includes(status)) {\r\n\t\t\tresult = \"FAILED\";\r\n\t\t} else {\r\n\t\t\tresult = \"IN_PROGRESS\";\r\n\t\t}\r\n\t}\r\n\r\n\tconst startedAt = transferInfo?.startedAt || summary.startedAt || transferCreatedEvent?.timestampMs || null;\r\n\tconst completedAt = transferInfo?.completedAt || summary.completedAt || null;\r\n\tconst failedAt = transferInfo?.failedAt || summary.failedAt || null;\r\n\tconst lastEventAt = summary.lastEventAt || latestEvent?.timestampMs || null;\r\n\tconst finishedAt = completedAt || failedAt || completionEvent?.timestampMs || lastEventAt;\r\n\tlet totalDurationMs = typeof summary.totalDurationMs === \"number\" ? summary.totalDurationMs : null;\r\n\tif (totalDurationMs === null && startedAt && finishedAt) {\r\n\t\ttotalDurationMs = Math.max(0, finishedAt - startedAt);\r\n\t}\r\n\tif (totalDurationMs === null && typeof completionEvent?.durationMs === \"number\") {\r\n\t\ttotalDurationMs = completionEvent.durationMs;\r\n\t}\r\n\r\n\tconst validation = summary.validation || validationEvent?.validation || null;\r\n\tlet sourceVerification = summary.sourceVerification || transferCreatedEvent?.sourceVerification || null;\r\n\tif (!sourceVerification && validation) {\r\n\t\tsourceVerification = {\r\n\t\t\titemCounts: validation.expectedItemCounts || {},\r\n\t\t\tfluidCounts: validation.expectedFluidCounts || {},\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\ttransferId,\r\n\t\tresult,\r\n\t\tstatus,\r\n\t\ttotalDurationMs,\r\n\t\ttotalDurationStr: summary.totalDurationStr || formatDuration(totalDurationMs),\r\n\t\tphases: summary.phases || completionEvent?.phases || {},\r\n\t\tplatform: summary.platform || {\r\n\t\t\tname: transferInfo?.platformName || \"Unknown\",\r\n\t\t\tsource: {\r\n\t\t\t\tinstanceId: transferInfo?.sourceInstanceId ?? -1,\r\n\t\t\t\tinstanceName: transferInfo?.sourceInstanceName ?? null,\r\n\t\t\t},\r\n\t\t\tdestination: {\r\n\t\t\t\tinstanceId: transferInfo?.targetInstanceId ?? -1,\r\n\t\t\t\tinstanceName: transferInfo?.targetInstanceName ?? null,\r\n\t\t\t},\r\n\t\t},\r\n\t\tpayload: summary.payload || completionEvent?.payloadMetrics || transferCreatedEvent?.payloadMetrics || null,\r\n\t\timport: summary.import || completionEvent?.importMetrics || validationEvent?.importMetrics || null,\r\n\t\tvalidation,\r\n\t\tsourceVerification,\r\n\t\tstartedAt,\r\n\t\tcompletedAt,\r\n\t\tfailedAt,\r\n\t\tlastEventAt,\r\n\t\terror: summary.error || transferInfo?.error || null,\r\n\t};\r\n}\r\n\r\nfunction TransactionLogsTab({ plugin, state }) {\r\n\tconst [selectedTransferId, setSelectedTransferId] = useState(null);\r\n\tconst selectedDetails = selectedTransferId ? state.logDetails[selectedTransferId] : null;\r\n\tconst detailedSummary = useMemo(\r\n\t\t() => (selectedDetails ? buildDetailedLogSummary(selectedDetails, selectedTransferId) : null),\r\n\t\t[selectedDetails, selectedTransferId]\r\n\t);\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: \"Transfer\",\r\n\t\t\tdataIndex: \"transferId\",\r\n\t\t\tkey: \"transferId\",\r\n\t\t\trender: transferId => <Text code>{transferId}</Text>,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Platform\",\r\n\t\t\tdataIndex: \"platformName\",\r\n\t\t\tkey: \"platformName\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Source\",\r\n\t\t\tkey: \"source\",\r\n\t\t\trender: (_, row) => row.sourceInstanceName || row.sourceInstanceId,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Destination\",\r\n\t\t\tkey: \"destination\",\r\n\t\t\trender: (_, row) => row.targetInstanceName || row.targetInstanceId,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Status\",\r\n\t\t\tdataIndex: \"status\",\r\n\t\t\tkey: \"status\",\r\n\t\t\trender: status => <Tag color={statusColor(status)}>{status}</Tag>,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Started\",\r\n\t\t\tdataIndex: \"startedAt\",\r\n\t\t\tkey: \"startedAt\",\r\n\t\t\trender: startedAt => startedAt ? new Date(startedAt).toLocaleString() : \"-\",\r\n\t\t},\r\n\t];\r\n\tconst metricColumns = [\r\n\t\t{\r\n\t\t\ttitle: \"Metric\",\r\n\t\t\tdataIndex: \"metric\",\r\n\t\t\tkey: \"metric\",\r\n\t\t\twidth: \"60%\",\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Value\",\r\n\t\t\tdataIndex: \"value\",\r\n\t\t\tkey: \"value\",\r\n\t\t},\r\n\t];\r\n\tconst comparisonColumns = [\r\n\t\t{\r\n\t\t\ttitle: \"Key\",\r\n\t\t\tdataIndex: \"name\",\r\n\t\t\tkey: \"name\",\r\n\t\t\twidth: \"40%\",\r\n\t\t\trender: name => <Text code>{name}</Text>,\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Expected\",\r\n\t\t\tdataIndex: \"expected\",\r\n\t\t\tkey: \"expected\",\r\n\t\t\trender: value => formatNumeric(value, Number.isInteger(value) ? 0 : 1),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Actual\",\r\n\t\t\tdataIndex: \"actual\",\r\n\t\t\tkey: \"actual\",\r\n\t\t\trender: value => formatNumeric(value, Number.isInteger(value) ? 0 : 1),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"\",\r\n\t\t\tdataIndex: \"delta\",\r\n\t\t\tkey: \"delta\",\r\n\t\t\trender: delta => (\r\n\t\t\t\t<Text type={delta === 0 ? undefined : delta > 0 ? \"success\" : \"danger\"}>\r\n\t\t\t\t\t{formatSigned(delta, Number.isInteger(delta) ? 0 : 1)}\r\n\t\t\t\t</Text>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: \"Preserved\",\r\n\t\t\tdataIndex: \"preservedPct\",\r\n\t\t\tkey: \"preservedPct\",\r\n\t\t\trender: value => (value === null ? \"-\" : `${formatNumeric(value, 1)}%`),\r\n\t\t},\r\n\t];\r\n\r\n\tconst timelineItems = (selectedDetails?.events || []).map(event => {\r\n\t\tconst eventType = event.eventType || \"\";\r\n\t\tconst isFailure = eventType.includes(\"failed\") || eventType.includes(\"error\");\r\n\t\tconst isSuccess = eventType.includes(\"completed\") || eventType.includes(\"success\");\r\n\t\treturn {\r\n\t\t\tcolor: isFailure ? \"red\" : isSuccess ? \"green\" : \"blue\",\r\n\t\t\tlabel: event.timestamp ? new Date(event.timestamp).toLocaleTimeString() : \"\",\r\n\t\t\tchildren: (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Text strong>{event.eventType || \"event\"}</Text>\r\n\t\t\t\t\t<div>{event.message || \"\"}</div>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t};\r\n\t});\r\n\r\n\tconst phaseRows = useMemo(\r\n\t\t() => Object.entries(detailedSummary?.phases || {})\r\n\t\t\t.map(([phase, durationMs]) => ({\r\n\t\t\t\tkey: phase,\r\n\t\t\t\tphase: humanizeMetricKey(String(phase).replace(/Ms$/, \"\")),\r\n\t\t\t\tdurationMs: Number(durationMs) || 0,\r\n\t\t\t\tduration: formatDuration(Number(durationMs) || 0),\r\n\t\t\t}))\r\n\t\t\t.sort((a, b) => b.durationMs - a.durationMs),\r\n\t\t[detailedSummary]\r\n\t);\r\n\tconst payloadRows = useMemo(() => buildMetricRows(detailedSummary?.payload), [detailedSummary]);\r\n\tconst importRows = useMemo(() => buildMetricRows(detailedSummary?.import), [detailedSummary]);\r\n\r\n\tconst validation = detailedSummary?.validation || null;\r\n\tconst validationRows = useMemo(() => {\r\n\t\tif (!validation) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\treturn [\r\n\t\t\t{ key: \"itemCountMatch\", metric: \"Item counts match\", value: validation.itemCountMatch ? \"Yes\" : \"No\" },\r\n\t\t\t{ key: \"fluidCountMatch\", metric: \"Fluid counts match\", value: validation.fluidCountMatch ? \"Yes\" : \"No\" },\r\n\t\t\t{ key: \"entityCount\", metric: \"Entity count\", value: formatNumeric(validation.entityCount, 0) },\r\n\t\t\t{ key: \"itemTypesExpected\", metric: \"Item types (expected)\", value: formatNumeric(validation.itemTypesExpected, 0) },\r\n\t\t\t{ key: \"itemTypesActual\", metric: \"Item types (actual)\", value: formatNumeric(validation.itemTypesActual, 0) },\r\n\t\t\t{ key: \"fluidTypesExpected\", metric: \"Fluid types (expected)\", value: formatNumeric(validation.fluidTypesExpected, 0) },\r\n\t\t\t{ key: \"fluidTypesActual\", metric: \"Fluid types (actual)\", value: formatNumeric(validation.fluidTypesActual, 0) },\r\n\t\t];\r\n\t}, [validation]);\r\n\r\n\tconst expectedItems = validation?.expectedItemCounts\r\n\t\t|| detailedSummary?.sourceVerification?.itemCounts\r\n\t\t|| {};\r\n\tconst actualItems = validation?.actualItemCounts || {};\r\n\tconst expectedFluids = validation?.expectedFluidCounts\r\n\t\t|| detailedSummary?.sourceVerification?.fluidCounts\r\n\t\t|| {};\r\n\tconst actualFluids = validation?.actualFluidCounts || {};\r\n\r\n\tconst itemRows = useMemo(() => buildExpectedActualRows(expectedItems, actualItems), [expectedItems, actualItems]);\r\n\tconst fluidRows = useMemo(() => buildExpectedActualRows(expectedFluids, actualFluids), [expectedFluids, actualFluids]);\r\n\r\n\tconst totalRows = useMemo(() => {\r\n\t\tif (!validation) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tconst itemExpected = validation.totalExpectedItems ?? sumValues(expectedItems);\r\n\t\tconst itemActual = validation.totalActualItems ?? sumValues(actualItems);\r\n\t\tconst fluidExpected = validation.totalExpectedFluids ?? sumValues(expectedFluids);\r\n\t\tconst fluidActual = validation.totalActualFluids ?? sumValues(actualFluids);\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tkey: \"items\",\r\n\t\t\t\tname: \"Items (total)\",\r\n\t\t\t\texpected: itemExpected,\r\n\t\t\t\tactual: itemActual,\r\n\t\t\t\tdelta: itemActual - itemExpected,\r\n\t\t\t\tpreservedPct: itemExpected > 0 ? (itemActual / itemExpected) * 100 : null,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tkey: \"fluids\",\r\n\t\t\t\tname: \"Fluids (total)\",\r\n\t\t\t\texpected: fluidExpected,\r\n\t\t\t\tactual: fluidActual,\r\n\t\t\t\tdelta: fluidActual - fluidExpected,\r\n\t\t\t\tpreservedPct: fluidExpected > 0 ? (fluidActual / fluidExpected) * 100 : null,\r\n\t\t\t},\r\n\t\t];\r\n\t}, [validation, expectedItems, actualItems, expectedFluids, actualFluids]);\r\n\r\n\tconst entityRows = useMemo(\r\n\t\t() => Object.entries(validation?.entityTypeBreakdown || {})\r\n\t\t\t.map(([type, count]) => ({\r\n\t\t\t\tkey: type,\r\n\t\t\t\tentityType: type,\r\n\t\t\t\tcount: Number(count) || 0,\r\n\t\t\t}))\r\n\t\t\t.sort((a, b) => b.count - a.count),\r\n\t\t[validation]\r\n\t);\r\n\r\n\tconst fluidReconciliationRows = useMemo(() => {\r\n\t\tconst recon = validation?.fluidReconciliation;\r\n\t\tif (!recon) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\treturn [\r\n\t\t\t{ key: \"rawFluidDelta\", metric: \"Raw fluid delta\", value: formatSigned(recon.rawFluidDelta, 1) },\r\n\t\t\t{ key: \"reconciledFluidLoss\", metric: \"Reconciled fluid loss\", value: formatNumeric(recon.reconciledFluidLoss, 1) },\r\n\t\t\t{ key: \"lowTempLoss\", metric: \"Low-temp loss\", value: formatNumeric(recon.lowTempLoss, 1) },\r\n\t\t\t{ key: \"highTempReconciledLoss\", metric: \"High-temp reconciled loss\", value: formatNumeric(recon.highTempReconciledLoss, 1) },\r\n\t\t\t{ key: \"fluidPreservedPct\", metric: \"Fluid preserved\", value: `${formatNumeric(recon.fluidPreservedPct, 1)}%` },\r\n\t\t\t{ key: \"highTempThreshold\", metric: \"High-temp threshold\", value: formatNumeric(recon.highTempThreshold, 0) },\r\n\t\t];\r\n\t}, [validation]);\r\n\r\n\tconst highTempRows = useMemo(\r\n\t\t() => Object.entries(validation?.fluidReconciliation?.highTempAggregates || {})\r\n\t\t\t.map(([name, aggregate]) => ({\r\n\t\t\t\tkey: name,\r\n\t\t\t\tname,\r\n\t\t\t\texpected: Number(aggregate?.expected || 0),\r\n\t\t\t\tactual: Number(aggregate?.actual || 0),\r\n\t\t\t\tdelta: Number(aggregate?.delta || 0),\r\n\t\t\t\treconciled: Boolean(aggregate?.reconciled),\r\n\t\t\t}))\r\n\t\t\t.sort((a, b) => Math.abs(b.delta) - Math.abs(a.delta) || a.name.localeCompare(b.name)),\r\n\t\t[validation]\r\n\t);\r\n\r\n\tconst selectedStatus = detailedSummary?.status || selectedDetails?.transferInfo?.status || \"unknown\";\r\n\tconst selectedResult = detailedSummary?.result || \"IN_PROGRESS\";\r\n\tconst summaryAlertType = selectedResult === \"SUCCESS\"\r\n\t\t? \"success\"\r\n\t\t: selectedResult === \"FAILED\" ? \"error\" : \"info\";\r\n\tconst detailLoaded = Boolean(selectedDetails && detailedSummary);\r\n\tconst hasValidation = Boolean(validation);\r\n\r\n\treturn (\r\n\t\t<div className=\"surface-export-log-body\">\r\n\t\t\t<Card title=\"Recent Transfer Logs\">\r\n\t\t\t\t<Table\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t\tdataSource={state.transferSummaries}\r\n\t\t\t\t\trowKey={row => row.transferId}\r\n\t\t\t\t\tpagination={{ pageSize: 10 }}\r\n\t\t\t\t\trowClassName={row => row.transferId === selectedTransferId ? \"surface-export-log-row-selected\" : \"surface-export-log-row\"}\r\n\t\t\t\t\tonRow={row => ({\r\n\t\t\t\t\t\tonClick: async () => {\r\n\t\t\t\t\t\t\tsetSelectedTransferId(row.transferId);\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tawait plugin.loadTransactionLog(row.transferId);\r\n\t\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\t\tantMessage.error(err.message || \"Failed to load transaction log\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})}\r\n\t\t\t\t/>\r\n\t\t\t</Card>\r\n\r\n\t\t\t{!selectedTransferId ? (\r\n\t\t\t\t<Card title=\"Transfer Details\">\r\n\t\t\t\t\t<Empty description=\"Select a transfer row to view details\" />\r\n\t\t\t\t</Card>\r\n\t\t\t) : null}\r\n\r\n\t\t\t{selectedTransferId && !selectedDetails ? (\r\n\t\t\t\t<Card title=\"Transfer Details\">\r\n\t\t\t\t\t<Spin />\r\n\t\t\t\t</Card>\r\n\t\t\t) : null}\r\n\r\n\t\t\t{detailLoaded ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Card title=\"Transfer Summary\">\r\n\t\t\t\t\t\t<Alert\r\n\t\t\t\t\t\t\ttype={summaryAlertType}\r\n\t\t\t\t\t\t\tshowIcon\r\n\t\t\t\t\t\t\tmessage={`${selectedResult}: ${detailedSummary.platform?.name || selectedTransferId}`}\r\n\t\t\t\t\t\t\tdescription={`Duration: ${detailedSummary.totalDurationStr} | Status: ${selectedStatus}`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Space direction=\"vertical\" style={{ width: \"100%\", marginTop: 12 }}>\r\n\t\t\t\t\t\t\t{detailedSummary.error ? (\r\n\t\t\t\t\t\t\t\t<Alert\r\n\t\t\t\t\t\t\t\t\ttype=\"error\"\r\n\t\t\t\t\t\t\t\t\tshowIcon\r\n\t\t\t\t\t\t\t\t\tmessage=\"Transfer error\"\r\n\t\t\t\t\t\t\t\t\tdescription={detailedSummary.error}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tpagination={false}\r\n\t\t\t\t\t\t\t\tcolumns={metricColumns}\r\n\t\t\t\t\t\t\t\tdataSource={[\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tkey: \"platform\",\r\n\t\t\t\t\t\t\t\t\t\tmetric: \"Platform\",\r\n\t\t\t\t\t\t\t\t\t\tvalue: detailedSummary.platform?.name || \"-\",\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tkey: \"source\",\r\n\t\t\t\t\t\t\t\t\t\tmetric: \"Source\",\r\n\t\t\t\t\t\t\t\t\t\tvalue: detailedSummary.platform?.source?.instanceName\r\n\t\t\t\t\t\t\t\t\t\t\t|| detailedSummary.platform?.source?.instanceId\r\n\t\t\t\t\t\t\t\t\t\t\t|| \"-\",\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tkey: \"destination\",\r\n\t\t\t\t\t\t\t\t\t\tmetric: \"Destination\",\r\n\t\t\t\t\t\t\t\t\t\tvalue: detailedSummary.platform?.destination?.instanceName\r\n\t\t\t\t\t\t\t\t\t\t\t|| detailedSummary.platform?.destination?.instanceId\r\n\t\t\t\t\t\t\t\t\t\t\t|| \"-\",\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t<Card title=\"Phase Timing\">\r\n\t\t\t\t\t\t{phaseRows.length ? (\r\n\t\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tpagination={false}\r\n\t\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t\t{ title: \"Phase\", dataIndex: \"phase\", key: \"phase\" },\r\n\t\t\t\t\t\t\t\t\t{ title: \"Duration\", dataIndex: \"duration\", key: \"duration\" },\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\tdataSource={phaseRows}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Empty description=\"No phase timing data available yet\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t<Card title=\"Payload Metrics\">\r\n\t\t\t\t\t\t{payloadRows.length ? (\r\n\t\t\t\t\t\t\t<Table size=\"small\" pagination={false} columns={metricColumns} dataSource={payloadRows} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Empty description=\"No payload metrics available\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t<Card title=\"Import Processing Metrics\">\r\n\t\t\t\t\t\t{importRows.length ? (\r\n\t\t\t\t\t\t\t<Table size=\"small\" pagination={false} columns={metricColumns} dataSource={importRows} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Empty description=\"No import metrics available\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t<Card title=\"Validation Overview\">\r\n\t\t\t\t\t\t{hasValidation ? (\r\n\t\t\t\t\t\t\t<Space direction=\"vertical\" style={{ width: \"100%\" }}>\r\n\t\t\t\t\t\t\t\t<Table size=\"small\" pagination={false} columns={metricColumns} dataSource={validationRows} />\r\n\t\t\t\t\t\t\t\t{validation?.mismatchDetails ? (\r\n\t\t\t\t\t\t\t\t\t<Alert\r\n\t\t\t\t\t\t\t\t\t\ttype=\"error\"\r\n\t\t\t\t\t\t\t\t\t\tshowIcon\r\n\t\t\t\t\t\t\t\t\t\tmessage=\"Validation mismatch details\"\r\n\t\t\t\t\t\t\t\t\t\tdescription={validation.mismatchDetails}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t\t<Table size=\"small\" pagination={false} columns={comparisonColumns} dataSource={totalRows} />\r\n\t\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Empty description=\"No validation data available yet\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t<Card title=\"Entity Type Breakdown\">\r\n\t\t\t\t\t\t{entityRows.length ? (\r\n\t\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tpagination={{ pageSize: 10 }}\r\n\t\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t\t{ title: \"Entity Type\", dataIndex: \"entityType\", key: \"entityType\", render: value => <Text code>{value}</Text> },\r\n\t\t\t\t\t\t\t\t\t{ title: \"Count\", dataIndex: \"count\", key: \"count\", render: value => formatNumeric(value, 0) },\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\tdataSource={entityRows}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Empty description=\"No entity breakdown available\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t<Card title=\"Item Inventory (Expected vs Actual)\">\r\n\t\t\t\t\t\t{itemRows.length ? (\r\n\t\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tpagination={{ pageSize: 20 }}\r\n\t\t\t\t\t\t\t\tcolumns={comparisonColumns}\r\n\t\t\t\t\t\t\t\tdataSource={itemRows}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Empty description=\"No item inventory data available\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t<Card title=\"Fluid Inventory (Expected vs Actual)\">\r\n\t\t\t\t\t\t{fluidRows.length ? (\r\n\t\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tpagination={{ pageSize: 20 }}\r\n\t\t\t\t\t\t\t\tcolumns={comparisonColumns}\r\n\t\t\t\t\t\t\t\tdataSource={fluidRows}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Empty description=\"No fluid inventory data available\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t<Card title=\"High-Temperature Fluid Aggregates\">\r\n\t\t\t\t\t\t{highTempRows.length ? (\r\n\t\t\t\t\t\t\t<Table\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tpagination={false}\r\n\t\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t\t{ title: \"Fluid\", dataIndex: \"name\", key: \"name\", render: value => <Text code>{value}</Text> },\r\n\t\t\t\t\t\t\t\t\t{ title: \"Expected\", dataIndex: \"expected\", key: \"expected\", render: value => formatNumeric(value, 1) },\r\n\t\t\t\t\t\t\t\t\t{ title: \"Actual\", dataIndex: \"actual\", key: \"actual\", render: value => formatNumeric(value, 1) },\r\n\t\t\t\t\t\t\t\t\t{ title: \"\", dataIndex: \"delta\", key: \"delta\", render: value => formatSigned(value, 1) },\r\n\t\t\t\t\t\t\t\t\t{ title: \"Reconciled\", dataIndex: \"reconciled\", key: \"reconciled\", render: value => value ? \"Yes\" : \"No\" },\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\tdataSource={highTempRows}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Empty description=\"No high-temp aggregate data available\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t{fluidReconciliationRows.length ? (\r\n\t\t\t\t\t\t<Card title=\"Fluid Reconciliation\">\r\n\t\t\t\t\t\t\t<Table size=\"small\" pagination={false} columns={metricColumns} dataSource={fluidReconciliationRows} />\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t<Card title=\"Transfer Timeline\">\r\n\t\t\t\t\t\t<Timeline items={timelineItems} />\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction SurfaceExportPage() {\r\n\tconst control = useContext(ControlContext);\r\n\tconst plugin = useSurfaceExportPlugin(control);\r\n\tconst state = useSurfaceExportState(plugin);\r\n\tconst tabItems = [\r\n\t\t{\r\n\t\t\tkey: \"manual\",\r\n\t\t\tlabel: \"Manual Transfer\",\r\n\t\t\tchildren: <ManualTransferTab plugin={plugin} state={state} />,\r\n\t\t},\r\n\t];\r\n\tif (state.canViewLogs !== false) {\r\n\t\ttabItems.push({\r\n\t\t\tkey: \"logs\",\r\n\t\t\tlabel: \"Transaction Logs\",\r\n\t\t\tchildren: <TransactionLogsTab plugin={plugin} state={state} />,\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<PageLayout nav={[{ name: \"Surface Export\" }]}>\r\n\t\t\t<PageHeader title=\"Surface Export\" />\r\n\t\t\t<Tabs\r\n\t\t\t\tdefaultActiveKey=\"manual\"\r\n\t\t\t\titems={tabItems}\r\n\t\t\t/>\r\n\t\t</PageLayout>\r\n\t);\r\n}\r\n\r\nexport class WebPlugin extends BaseWebPlugin {\r\n\tconstructor(container, packageData, info, control, logger) {\r\n\t\tsuper(container, packageData, info, control, logger);\r\n\t\tthis.callbacks = [];\r\n\t\tthis.liveUpdatesEnabled = false;\r\n\t\tthis.state = {\r\n\t\t\ttree: null,\r\n\t\t\tloadingTree: false,\r\n\t\t\ttreeError: null,\r\n\t\t\ttransferSummaries: [],\r\n\t\t\tlogDetails: {},\r\n\t\t\tlastTreeRevision: 0,\r\n\t\t\tlastTransferRevision: 0,\r\n\t\t\tlastLogRevision: 0,\r\n\t\t\tcanViewLogs: true,\r\n\t\t};\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tthis.pages = [\r\n\t\t\t{\r\n\t\t\t\tpath: \"/surface-export\",\r\n\t\t\t\tsidebarName: \"Surface Export\",\r\n\t\t\t\tpermission: PERMISSIONS.UI_VIEW,\r\n\t\t\t\tcontent: <SurfaceExportPage />,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tthis.control.handle(SurfaceExportTreeUpdateEvent, this.handleTreeUpdate.bind(this));\r\n\t\tthis.control.handle(SurfaceExportTransferUpdateEvent, this.handleTransferUpdate.bind(this));\r\n\t\tthis.control.handle(SurfaceExportLogUpdateEvent, this.handleLogUpdate.bind(this));\r\n\t}\r\n\r\n\tonControllerConnectionEvent(event) {\r\n\t\tif (event === \"connect\" || event === \"resume\") {\r\n\t\t\tthis.syncLiveState().catch(notifyErrorHandler(\"Failed to resubscribe Surface Export live updates\"));\r\n\t\t}\r\n\t}\r\n\r\n\tgetState() {\r\n\t\treturn this.state;\r\n\t}\r\n\r\n\tsetState(partial) {\r\n\t\tthis.state = { ...this.state, ...partial };\r\n\t\tfor (const callback of this.callbacks) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\tonUpdate(callback) {\r\n\t\tthis.callbacks.push(callback);\r\n\t\tthis.syncLiveState().catch(notifyErrorHandler(\"Failed to start Surface Export live updates\"));\r\n\t}\r\n\r\n\toffUpdate(callback) {\r\n\t\tconst index = this.callbacks.lastIndexOf(callback);\r\n\t\tif (index !== -1) {\r\n\t\t\tthis.callbacks.splice(index, 1);\r\n\t\t}\r\n\t\tthis.syncLiveState().catch(notifyErrorHandler(\"Failed to update Surface Export subscription\"));\r\n\t}\r\n\r\n\tasync syncLiveState() {\r\n\t\tconst shouldEnable = this.callbacks.length > 0;\r\n\t\tif (!this.control.connector.connected) {\r\n\t\t\tthis.liveUpdatesEnabled = shouldEnable;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst trySubscribe = logs => this.control.send(new SetSurfaceExportSubscriptionRequest({\r\n\t\t\ttree: shouldEnable,\r\n\t\t\ttransfers: shouldEnable,\r\n\t\t\tlogs,\r\n\t\t\ttransferId: null,\r\n\t\t}));\r\n\t\tlet logsEnabled = shouldEnable && this.state.canViewLogs !== false;\r\n\t\ttry {\r\n\t\t\tawait trySubscribe(logsEnabled);\r\n\t\t} catch (err) {\r\n\t\t\tif (logsEnabled && /permission denied/i.test(err?.message || \"\")) {\r\n\t\t\t\tlogsEnabled = false;\r\n\t\t\t\tthis.setState({ canViewLogs: false });\r\n\t\t\t\tawait trySubscribe(false);\r\n\t\t\t} else {\r\n\t\t\t\tthrow err;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.liveUpdatesEnabled = shouldEnable;\r\n\t\tif (shouldEnable) {\r\n\t\t\tawait this.refreshSnapshots();\r\n\t\t}\r\n\t}\r\n\r\n\tasync refreshSnapshots() {\r\n\t\tthis.setState({ loadingTree: true, treeError: null });\r\n\t\ttry {\r\n\t\t\tconst treeResponse = await this.control.send(new GetPlatformTreeRequest({ forceName: \"player\" }));\r\n\t\t\tlet transferSummaries = this.state.transferSummaries;\r\n\t\t\tif (this.state.canViewLogs !== false) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst logSummaries = await this.control.send(new ListTransactionLogsRequest({ limit: 100 }));\r\n\t\t\t\t\ttransferSummaries = Array.isArray(logSummaries)\r\n\t\t\t\t\t\t? [...logSummaries].sort((a, b) => (b.startedAt || 0) - (a.startedAt || 0))\r\n\t\t\t\t\t\t: [];\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tif (/permission denied/i.test(err?.message || \"\")) {\r\n\t\t\t\t\t\tthis.setState({ canViewLogs: false });\r\n\t\t\t\t\t\ttransferSummaries = [];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\ttree: {\r\n\t\t\t\t\tforceName: treeResponse.forceName,\r\n\t\t\t\t\thosts: treeResponse.hosts || [],\r\n\t\t\t\t\tunassignedInstances: treeResponse.unassignedInstances || [],\r\n\t\t\t\t\trevision: treeResponse.revision,\r\n\t\t\t\t\tgeneratedAt: treeResponse.generatedAt,\r\n\t\t\t\t},\r\n\t\t\t\ttransferSummaries,\r\n\t\t\t\tloadingTree: false,\r\n\t\t\t\ttreeError: null,\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tloadingTree: false,\r\n\t\t\t\ttreeError: err.message || \"Failed to refresh Surface Export state\",\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tasync startTransfer(payload) {\r\n\t\treturn this.control.send(new StartPlatformTransferRequest(payload));\r\n\t}\r\n\r\n\tasync loadTransactionLog(transferId) {\r\n\t\tconst response = await this.control.send(new GetTransactionLogRequest({ transferId }));\r\n\t\tif (!response.success) {\r\n\t\t\tthrow new Error(response.error || \"Failed to load transaction log\");\r\n\t\t}\r\n\r\n\t\tconst existing = this.state.logDetails[transferId] || {};\r\n\t\tconst transferInfo = response.transferInfo || existing.transferInfo || null;\r\n\t\tconst events = Array.isArray(response.events) ? response.events : existing.events || [];\r\n\t\tconst detail = {\r\n\t\t\ttransferInfo,\r\n\t\t\tsummary: response.summary || existing.summary || null,\r\n\t\t\tevents,\r\n\t\t};\r\n\r\n\t\tconst transferSummary = summaryFromTransferInfo(transferInfo, events.length ? events[events.length - 1].timestampMs : null);\r\n\t\tif (transferSummary) {\r\n\t\t\ttransferSummary.transferId = transferId;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tlogDetails: {\r\n\t\t\t\t...this.state.logDetails,\r\n\t\t\t\t[transferId]: detail,\r\n\t\t\t},\r\n\t\t\ttransferSummaries: transferSummary\r\n\t\t\t\t? mergeTransferSummary(this.state.transferSummaries, transferSummary)\r\n\t\t\t\t: this.state.transferSummaries,\r\n\t\t});\r\n\t}\r\n\r\n\tasync handleTreeUpdate(event) {\r\n\t\tif (event.revision <= this.state.lastTreeRevision) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\ttree: {\r\n\t\t\t\tforceName: event.forceName,\r\n\t\t\t\thosts: event.tree?.hosts || [],\r\n\t\t\t\tunassignedInstances: event.tree?.unassignedInstances || [],\r\n\t\t\t\trevision: event.revision,\r\n\t\t\t\tgeneratedAt: event.generatedAt,\r\n\t\t\t},\r\n\t\t\tloadingTree: false,\r\n\t\t\ttreeError: null,\r\n\t\t\tlastTreeRevision: event.revision,\r\n\t\t});\r\n\t}\r\n\r\n\tasync handleTransferUpdate(event) {\r\n\t\tif (event.revision <= this.state.lastTransferRevision) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\ttransferSummaries: mergeTransferSummary(this.state.transferSummaries, event.transfer),\r\n\t\t\tlastTransferRevision: event.revision,\r\n\t\t});\r\n\t}\r\n\r\n\tasync handleLogUpdate(event) {\r\n\t\tif (event.revision <= this.state.lastLogRevision) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst existing = this.state.logDetails[event.transferId] || { events: [] };\r\n\t\tconst events = [...existing.events];\r\n\t\tconst incoming = event.event || {};\r\n\t\tconst lastEvent = events.length ? events[events.length - 1] : null;\r\n\t\tconst isDuplicate = lastEvent\r\n\t\t\t&& lastEvent.timestampMs === incoming.timestampMs\r\n\t\t\t&& lastEvent.eventType === incoming.eventType\r\n\t\t\t&& lastEvent.message === incoming.message;\r\n\t\tif (!isDuplicate) {\r\n\t\t\tevents.push(incoming);\r\n\t\t}\r\n\r\n\t\tconst detail = {\r\n\t\t\ttransferInfo: event.transferInfo || existing.transferInfo || null,\r\n\t\t\tsummary: event.summary || existing.summary || null,\r\n\t\t\tevents,\r\n\t\t};\r\n\r\n\t\tlet transferSummary = null;\r\n\t\tif (event.transferInfo) {\r\n\t\t\ttransferSummary = summaryFromTransferInfo(event.transferInfo, incoming.timestampMs || null);\r\n\t\t\ttransferSummary.transferId = event.transferId;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\tlogDetails: {\r\n\t\t\t\t...this.state.logDetails,\r\n\t\t\t\t[event.transferId]: detail,\r\n\t\t\t},\r\n\t\t\ttransferSummaries: transferSummary\r\n\t\t\t\t? mergeTransferSummary(this.state.transferSummaries, transferSummary)\r\n\t\t\t\t: this.state.transferSummaries,\r\n\t\t\tlastLogRevision: event.revision,\r\n\t\t});\r\n\t}\r\n}\r\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","f","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","Fragment","jsx","jsxs","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","api","domAPI","update","newObj","remove","byIndex","splice","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","getTarget","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","btoa","unescape","encodeURIComponent","JSON","stringify","styleTagTransform","parentNode","removeChild","styleSheet","cssText","firstChild","createTextNode","locals","PERMISSIONS","GetPlatformTreeRequest","ListTransactionLogsRequest","GetTransactionLogRequest","StartPlatformTransferRequest","SetSurfaceExportSubscriptionRequest","SurfaceExportTreeUpdateEvent","SurfaceExportTransferUpdateEvent","SurfaceExportLogUpdateEvent","messageDefs","Text","Typography","statusColor","status","summaryFromTransferInfo","transferInfo","lastEventAt","transferId","platformName","sourceInstanceId","sourceInstanceName","targetInstanceId","targetInstanceName","startedAt","Date","now","completedAt","failedAt","error","mergeTransferSummary","existing","incoming","byId","Map","summary","set","get","Array","from","values","sort","ManualTransferTab","plugin","state","selectedPlatformKey","setSelectedPlatformKey","useState","selectedTargetInstance","setSelectedTargetInstance","isSubmitting","setIsSubmitting","tree","loadingTree","treeError","platformLookup","useMemo","lookup","addInstancePlatforms","instance","platform","platforms","instanceId","platformIndex","instanceName","forceName","host","hosts","instances","unassignedInstances","instanceListData","rows","localeCompare","hostName","hostConnected","connected","instanceConnected","instancePlatformError","platformError","selectedSource","destinationOptions","instanceNodes","filter","label","value","submitTransfer","response","startTransfer","sourcePlatformIndex","Number","success","errorDetails","console","info","antMessage","err","message","instanceColumns","title","dataIndex","width","render","row","Space","Tag","color","_","transferStatus","div","className","Card","Spin","Alert","showIcon","Empty","description","Table","size","columns","dataSource","rowKey","pagination","pageSize","rowClassName","onRow","onClick","direction","Select","placeholder","onChange","disabled","Button","loading","humanizeMetricKey","String","replace","trim","text","toUpperCase","formatDuration","durationMs","isNaN","toFixed","Math","round","toLocaleString","formatNumeric","maxFractionDigits","maximumFractionDigits","formatSigned","sign","sumValues","reduce","total","numeric","isFinite","buildMetricRows","data","entries","formattedValue","lowered","toLowerCase","endsWith","isInteger","metric","buildExpectedActualRows","expectedMap","actualMap","expected","actual","keys","Set","name","expectedValue","actualValue","delta","preservedPct","abs","findLatestEvent","events","predicate","TransactionLogsTab","selectedTransferId","setSelectedTransferId","selectedDetails","logDetails","detailedSummary","transferCreatedEvent","validationEvent","completionEvent","latestEvent","finishedAt","totalDurationMs","validation","sourceVerification","detail","isArray","event","eventType","includes","timestampMs","max","itemCounts","expectedItemCounts","fluidCounts","expectedFluidCounts","totalDurationStr","phases","source","destination","payload","payloadMetrics","import","importMetrics","code","metricColumns","comparisonColumns","timelineItems","isFailure","isSuccess","timestamp","toLocaleTimeString","children","strong","phaseRows","phase","duration","payloadRows","importRows","validationRows","itemCountMatch","fluidCountMatch","entityCount","itemTypesExpected","itemTypesActual","fluidTypesExpected","fluidTypesActual","expectedItems","actualItems","actualItemCounts","expectedFluids","actualFluids","actualFluidCounts","itemRows","fluidRows","totalRows","itemExpected","totalExpectedItems","itemActual","totalActualItems","fluidExpected","totalExpectedFluids","fluidActual","totalActualFluids","entityRows","entityTypeBreakdown","entityType","fluidReconciliationRows","recon","fluidReconciliation","rawFluidDelta","reconciledFluidLoss","lowTempLoss","highTempReconciledLoss","fluidPreservedPct","highTempThreshold","highTempRows","highTempAggregates","aggregate","reconciled","Boolean","selectedStatus","selectedResult","detailLoaded","hasValidation","transferSummaries","loadTransactionLog","marginTop","mismatchDetails","Timeline","items","SurfaceExportPage","control","useContext","ControlContext","plugins","useSurfaceExportState","setState","getState","useEffect","onUpdate","offUpdate","tabItems","canViewLogs","PageLayout","nav","PageHeader","Tabs","defaultActiveKey","WebPlugin","BaseWebPlugin","container","packageData","logger","callbacks","liveUpdatesEnabled","lastTreeRevision","lastTransferRevision","lastLogRevision","init","pages","path","sidebarName","permission","UI_VIEW","handle","handleTreeUpdate","bind","handleTransferUpdate","handleLogUpdate","onControllerConnectionEvent","syncLiveState","catch","notifyErrorHandler","partial","callback","lastIndexOf","shouldEnable","connector","trySubscribe","logs","send","transfers","logsEnabled","test","refreshSnapshots","treeResponse","logSummaries","limit","revision","generatedAt","transferSummary","transfer","lastEvent"],"sourceRoot":""}